---
description: What is the MDX plugins? Remark / Rehype plugin what are they and how are they different? How to create your own plugin?
sidebar_position: 8000
tags:
  - docusaurus
---

# MDX Plugins

Sometimes, you may want to extend or tweak your Markdown syntax.

For example:

- How do I embed youtube videos using the image syntax (`![](https://youtu.be/yKNxeF4KMsY)`)?
- How do I style links that are on their own lines differently, e.g., as a social card?
- How do I make every page start with a copyright notice?

And the answer is: create an MDX plugin!

MDX has a built-in [plugin system](https://mdxjs.com/advanced/plugins/) that can be used to customize how the Markdown files will be parsed and transformed to JSX.

There are three typical use-cases of MDX plugins:

- Using existing [remark plugins](https://github.com/remarkjs/remark/blob/main/doc/plugins.md#list-of-plugins) or [rehype plugins](https://github.com/rehypejs/rehype/blob/main/doc/plugins.md#list-of-plugins)
- Creating remark/rehype plugins to <Color color="var(--secondary-font-color)"> transform the elements </Color> generated by existing MDX syntax;
- Creating remark/rehype plugins to <Color color="var(--secondary-font-color)"> introduce new syntaxes </Color> to MDX.

If you play with the [MDX playground](https://mdx-git-renovate-babel-monorepo-mdx.vercel.app/playground),
you would notice that the MDX transpilation has two intermediate steps: Markdown AST (MDAST), and Hypertext AST (HAST), before arriving at the final JSX output.

MDX plugins also come in two forms:

- Remark: processes the Markdown AST.
- Rehype: processes the Hypertext AST.

<Admonition type="info" title="info">

Use plugins to introduce shorter syntax for the most commonly used JSX elements in your project.

The admonition syntax that we offer is also generated by a Remark plugin, and you could do the same for your own use case.

</Admonition>

## <Color color="var(--not-require-but-good-to-know-font-color)"> Default plugins </Color>

Docusaurus injects some default Remark plugins during Markdown processing.

These plugins would:

- Generate the table of contents;
- Add anchor links to each heading;
- Transform images and links to require() calls.
- ...

## Installing plugins

An MDX plugin is usually an npm package, so you install them like other npm packages using npm.

Take the [math plugins](https://docusaurus.io/docs/markdown-features/math-equations) as an example.

<Tabs>
<TabItem value="npm" label="npm">

```bash title=
npm install --save remark-math@3 rehype-katex@4
```

</TabItem>
<TabItem value="yarn" label="yarn">

```bash title=
yarn add remark-math@3 rehype-katex@4
```

</TabItem>
</Tabs>

<details>

<summary>
  How are <code>remark-math</code> and <code>rehype-katex</code> different?
</summary>

In case you are wondering how Remark and Rehype are different, here is a good example.

`remark-math` operates on the Markdown AST, where it sees text like `$...$`, and all it does is<Color color="var(--secondary-font-color)"> transform that to the JSX </Color> `<span class="math math-inline">...</span>` without doing too much with the content.
This decouples the extraction of math formulae from their rendering, which means you can swap $\KaTeX$ out with other math renderers, like MathJax (with [`rehype-mathjax`](https://github.com/remarkjs/remark-math/tree/main/packages/rehype-mathjax)), just by replacing the Rehype plugin.

`rehype-katex` operates on the Hypertext AST where everything <Color color="var(--secondary-font-color)"> has been converted </Color> to <Color color="var(--secondary-font-color)"> HTML-like </Color> tags <Color color="var(--primary-font-color)"> already </Color>.
It traverses all the elements with `math` class and uses $\KaTeX$ to <Color color="var(--secondary-font-color)"> parse and render </Color> the content to <Color color="var(--secondary-font-color)"> actual HTML </Color>.

</details>

<Admonition type="caution" title="caution">

There's recently a trend in the Remark/Rehype ecosystem to migrate to ES Modules, a new JavaScript module system, which Docusaurus <Color color="var(--primary-font-color)"> doesn't support yet </Color>.

Please make sure your installed plugin version is CommonJS-compatible before we officially support ESM.

</Admonition>

Next, add them to the plugin options through plugin or preset config in `docusaurus.config.js`:

```javascript title=docusaurus.config.js showLineNumbers
const math = require("remark-math");
const katex = require("rehype-katex");

module.exports = {
  title: "Docusaurus",
  tagline: "Build optimized websites quickly, focus on your content",
  presets: [
    [
      "@docusaurus/preset-classic",
      {
        docs: {
          // highlight-next-line
          remarkPlugins: [math],
          // highlight-next-line
          rehypePlugins: [katex],
        },
      },
    ],
  ],
};
```

## Configuring plugins

Some plugins can be configured and accept their own options. In that case, use the `[plugin, pluginOptions]` syntax, like this:

```javascript title=docusaurus.config.js showLineNumbers
module.exports = {
  presets: [
    [
      "@docusaurus/preset-classic",
      {
        docs: {
          remarkPlugins: [math],
          rehypePlugins: [[katex, { strict: false }]],
        },
      },
    ],
  ],
};
```

You should check your plugin's documentation for the options it supports.

## <Color color="var(--not-nesary-for-now-future-font-color)"> Creating new rehype/remark plugins </Color>

https://docusaurus.io/docs/markdown-features/plugins#creating-new-rehyperemark-plugins

<br />

---

# Sources

- https://docusaurus.io/docs/markdown-features/plugins
